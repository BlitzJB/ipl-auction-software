{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The SNUC IPL Auction</title>
  <link href="/static/css/style.css" rel="stylesheet">
</head>

<body>
  {% if status == "done" %}
  <div class="done">
    <div style="font-size: 80px;">
      Congragulations!
    </div>
    <div style="font-size: 40px;">
      Auction is over. We are tallying up our results...
    </div>
  </div>
  {% else %}
    <div id="modal">
      <div id="modal-content">
        <h1 style="font-size: 30px;">New Pool</h1>
        <!--- POOL NAME -->
        <div id="pool-name">{{ pool.poolCode }} - {{ pool.poolName }}</div>
        <div id="closemodal">Continue -&gt;</div>
      </div>
    </div>

    <nav>
      <img src="/static/header.png" height=250>
    </nav>

    <div class="parent-container">
      <div class="flex-item">

        <div style="position: relative;">
          <img src="/static/assets/db_long.svg">
          <div
            style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 32px; width: 100%;">
            <!--- NAME goes here-->
            {{ player.name }}
          </div>
        </div>

        <div class="pinfo">
          <div class="text">
            <div class="country">
              <!-- country comes here -->
              {{ player.country }}
            </div>
            <div class="age">
              <!-- age: [age] comes here -->
              AGE: {{ player.age }}
            </div>
          </div>

          <div class="overlay-container">
            <img src="/static/assets/borders.png" alt="overlay image">

            <div class="hexagon-container">
              <!--- IMAGE comes here -->
              <img src="{{player.img.url}}" height=300>
            </div>
          </div>
        </div>

        <div style="position: relative;">
          <img src="/static/assets/db_long.svg">
          <div
            style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 40px; width: 100%;">
            <!--- SET CODE and SET goes here-->
            {{ pool.poolCode }} - {{ pool.poolName }}
          </div>
        </div>

        <div class="price">
          <div style="position: relative;">
            <img src="/static/assets/db_short.svg">
            <div
              style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%;">
              <!--- PRICE goes here -->
              â‚¹ {{ player.basePrice }} L
            </div>
          </div>

          <div style="position: relative;">
            <img src="/static/assets/b_short.svg">
            <div
              style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%">
              BASE PRICE
            </div>
          </div>
        </div>
      </div>

      <div class="flex-item">
        <div>
          <img src="/static/assets/top.png">
        </div>

        <div style="position: relative">
          <img src="/static/assets/db_right.svg">
          <div
            style="position: absolute; top: 50%; left: 11.5%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%">
            IPL
          </div>
          <div
            style="position: absolute; top: 50%; left: 36%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%">
            <!-- MATCHES Count -->
            {% if player.numMatches %}
              <div>{{ player.numMatches }}</div>
            {% else %}
              <div>-</div>
            {% endif %}
          </div>
          <div
            style="position: absolute; top: 50%; left: 63.5%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%">
            <!-- RUNS Count -->
            4400
          </div>
          <div
            style="position: absolute; top: 50%; left: 87.5%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%">
            <!-- WICKETS Count -->
            -
          </div>
        </div>

        <div>
          <img src="/static/assets/bottom.png">
        </div>

        <div style="position: relative;">
          <img src="/static/assets/db_right.svg">
          <div
            style="position: absolute; top: 50%; left: 20%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%">
            <!--- BAT. Avg -->
            {% if player.battingAvg %}
              <div>{{ player.battingAvg }}</div>
              {% else %}
              <div>-</div>
            {% endif %}
          </div>

          <div
            style="position: absolute; top: 50%; left: 56%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%">
            <!--- BOW. Avg -->
              {% if player.bowlingAvg %}
                <div>{{ player.bowlingAvg }}</div>
                {% else %}
                <div>-</div>
              {% endif %}
          </div>

          <div
            style="position: absolute; top: 50%; left: 86.5%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%">
            <!--- S/R -->
            123.4
          </div>
        </div>

        <div style="position: relative; margin-top: 40px;">
          {% if rtm %}
          <div id="rtm-container" style="cursor: pointer;">
            <img src="/static/assets/rect.svg" id="rtmimg">

            <div
              id="name" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: 36px; width: 100%;">
              <!--- TEAM goes here -->
              RTM: {{ team.name }}
            </div>
          </div>
          {% else %}
          <div id="rtm-container">
            <img src="/static/assets/rectdark.svg" id="rtmimg">

            <div
              style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #ddd; font-size: 36px; width: 100%;">
              RTM: {{ team.name }}
            </div>
          </div>
          {% endif %}
        </div>

        <a href="{% url 'get_player' id|add:'1' %}">
          <div class="next">
            <img src="/static/next.png" width=150>
          </div>
        </a>
      </div>
    </div>

    <script>
      let showModal = "{{ pool.isNewPool }}";
      showModal = showModal === "True" ? true : false;

      document.addEventListener("DOMContentLoaded", () => {
        if (showModal) {
          document.getElementById("modal").style.display = "flex";
        }
      });

      document.getElementById("closemodal").addEventListener("click", () => {
        document.getElementById("modal").style.display = "none";
      });

      {% if rtm %}

      const rtmContainer = document.getElementById('rtm-container');
      const name = document.getElementById('name');
      const img = document.getElementById('rtmimg');

      rtmContainer.addEventListener('click', () => {
        fetch('/player_rtm?team_code={{ team.code }}')
          .then(() => {
            img.src = "/static/assets/rectdark.svg";
            name.innerText = 'RTM: Successfully Set';
            rtmContainer.style.cursor = "auto";
          });
      })

      {% endif %}
    </script>
  {% endif %}

</body>

</html>
